<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<section class="todoapp">

  <!-- Header section -->
  <header class="header">
    <h1>Todo</h1>
  </header>

  <!-- Task cards section -->
  <section class="main">
    <div *ngFor="let todo of todos$ | async">
      <mat-card [ngClass]="{editing: editing}">
        <mat-card-header>
          <mat-card-title (dblclick)="editing = true">{{todo.title}}</mat-card-title>
          <mat-card-subtitle>{{todo.description}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-actions align="end">
          <button class="editBtn" mat-button
                  (click)="updatePopup(todo._id,todo.title,todo.description)">Edit</button>
          <button class="deleteBtn" mat-button (click)="deleteOne(todo._id)">Delete</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </section>

  <!-- Update Task popup section -->
  <section class="updatesection">
    <div class="updateCard" *ngIf="editing">
      <mat-icon aria-hidden="false" aria-label="Example home icon" fontIcon="close" class="x-icon"
                (click)="closePopup()"></mat-icon>
      <input matInput placeholder="Task Name" id="title" required name="title" [(ngModel)]="todoUpdateForm.title">
      <input matInput placeholder="Task Name" id="description" required name="description"
             [(ngModel)]="todoUpdateForm.description">
      <button class="editBtn" mat-button (click)="updateOne()">Update</button>
    </div>
  </section>

  <!-- footer section -->
  <footer class="footer">
    <form (ngSubmit)="save()">
      <mat-form-field appearance="outline">
        <mat-label>Task Name</mat-label>
        <input matInput placeholder="Task Name" id="title" required [(ngModel)]="todoForm.title" name="title">
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Description</mat-label>
        <textarea matInput placeholder="Description" id="description" required [(ngModel)]="todoForm.description"
                  name="description"></textarea>
      </mat-form-field>
      <button type="submit">Let's do!</button>
    </form>
  </footer>
</section>
